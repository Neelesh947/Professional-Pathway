package com.recruiter.service.serviceImpl;

import java.util.List;
import java.util.UUID;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.recruiter.service.model.Recruiter;
import com.recruiter.service.repository.UserRepository;
import com.recruiter.service.service.UserService;


@Service
public class UserServiceImpl implements UserService{

	@Autowired
	private UserRepository userRepository;
	@Override
	public Recruiter createUser(Recruiter user) throws Exception {
		// TODO Auto-generated method stub
		
		String uuid=UUID.randomUUID().toString();
		user.setId(uuid);	
		
		String fname=user.getFirstname();
		String lname=user.getLastname();
		
		String fullName = fname.concat(" ").concat(lname);
		
		user.setName(fullName);
		
		Recruiter existUser=this.userRepository.findByUsername(user.getUsername());
		
		if(existUser !=null)
		{
			System.out.println("User Already Exist");
			throw new Exception("USER ALREADY PRESENT");
		}
		else
		{
			//create user
			existUser=this.userRepository.save(user);
		}
		
		return existUser;
	}
	
	
	// get all user
	@Override
	public List<Recruiter> getAllUser() {
		// TODO Auto-generated method stub
		
		List<Recruiter> user=this.userRepository.findAll();
		
		return user;
	}


	@Override
	public Recruiter getUserByUserId(String id) {
		// TODO Auto-generated method stub
		Recruiter user=this.userRepository.findById(id).orElse(null);
		return user;
	}

}
